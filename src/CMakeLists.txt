# Auto CMakeLists.txt, Generated by smvn
# if it is a top level cmakefile, must find cm/global.cmake first
SET(mname hello)
SET(mhook t${mname}_hook)
SET(mtest ${mname}_test)
SET(mtarget t${mname})

# defining common source variables
AUX_SOURCE_DIRECTORY(main MODULE_SRC)
AUX_SOURCE_DIRECTORY(hook HOOK_SRC)
AUX_SOURCE_DIRECTORY(test TEST_SRC)
AUX_SOURCE_DIRECTORY(ftest FTEST_SRC)

if (MODULE_SRC)
    include_directories(main)
    include_directories(include)

    ADD_LIBRARY(${mname} ${MODULE_SRC})

    if (LINT)
        add_pc_lint(${mname} ${MODULE_SRC})
    endif()

    if (HOOK_SRC)
        ADD_LIBRARY(${mhook} ${HOOK_SRC})
    endif()

    # defining exe libs
    if (_LWSF_CROSS)
    else (_LWSF_CROSS)
        if (WIN32 OR UNIX)
            if (TEST_SRC)
                ADD_EXECUTABLE(${mtest} ${MODULE_SRC} ${TEST_SRC})
                TARGET_LINK_LIBRARIES(${mtest} 
                    ${UNITLIB} 
                )
            endif()

            if (FTEST_SRC)
                ADD_EXECUTABLE(${mtarget} ${FTEST_SRC} ${MODULE_SRC})
                TARGET_LINK_LIBRARIES(${mtarget} 
                    ${OSLIB} 
                    )
            endif()
        endif()
    endif()
else(MODULE_SRC)
    # if no module src, test source may need
    include_directories(main)
    if (TEST_SRC)
        if (WIN32 OR UNIX)
            ADD_EXECUTABLE(${mtest} ${TEST_SRC})
            TARGET_LINK_LIBRARIES(${mtest} 
                ${mname} ${UNITLIB} 
                )
        endif()
    endif()

    if (FTEST_SRC)
        if (WIN32 OR UNIX)
            ADD_EXECUTABLE(${mtarget} ${FTEST_SRC})
            TARGET_LINK_LIBRARIES(${mtarget} 
                ${mname} ${OSLIB} 
                )
        endif()
    endif()
endif(MODULE_SRC)

SET_PMOD()

